<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>

  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
  <script>
   $(function(){
	var section = $('#contents > .parallax > div');
	var sectionInfo = [];
	var objectInfo = [];
	var totalSize = section.size();

	section.each(function(i){
		var tg = $(this);
		sectionInfo.push(tg.offset().top);

		objectInfo.push([]);

		var child = tg.children();
		child.each(function(j){
			var t = $(this);
			objectInfo[i][j] = t.position().top;
		});

		var upBtn = tg.find('> .tit > .arrow > a:eq(0)');
		var downBtn = tg.find('> .tit > .arrow > a:eq(1)');

		upBtn.click(function(e){
			e.preventDefault();
			if(i == 0) return;
			move(i-1);
		});

		downBtn.click(function(e){
			e.preventDefault();
			if(i == totalSize - 1) return;
			move(i+1);
		});
	});

	function move(sectionIndex){
		var tt = sectionInfo[sectionIndex];
		$('html, body')
		.stop()
		.animate({scrollTop:tt}, {duration:600, ease:'easeOutCubic'});
	}

	section.css('position', 'fixed');

	$(window).scroll(function(){
		var sct = $(window).scrollTop();

		section.each(function(i){
			var tg = $(this);
			var tt = -1 * sct + sectionInfo[i];
			if(sct > sectionInfo[i]) tt *= 0.5;

			tg.css('top', tt);

			var child = tg.children();
			child.each(function(j){
				var t = $(this);
				var start = sectionInfo[i];
				var end = sectionInfo[i + 1];
				if(!end) end = $(document).height();
				var min = objectInfo[i][j];
				var max = objectInfo[i][j] + j * 200 + 100;
				var objT = (sct - start) * (max - min) / (end - start) + min;
				t.css({top:objT});
			});
		});
	});
});
  </script>
</head>
<body>
  <div class="mWrap">
	<!--    mContents    -->
	<div class="mContents" id="contents">
		<div class="parallax">

			<div class="mSection01">
				<div class="obj07"></div>
				<div class="obj04"></div>
				<div class="obj02"></div>
				<div class="tit">
					<img src="images/index/mSection01_tit.png" alt="Shinangchon은 자연과 함께합니다 깨끗하고 아름다운 자연의 선물에 정성어린 마음을 담아 언제나 믿을 수 있는 제품을 만들고 있습니다. " />
					<div class="arrow"><a href="#"><img src="images/index/arrow_up.png" alt="위로" /></a><a href="#"><img src="images/index/arrow_down.png" alt="아래로" /></a></div>
				</div>
				<p class="txt"><img src="images/index/mSection01_txt.png" alt="Nature" /></p>
				<div class="obj05"></div>
				<div class="obj01"></div><!-- 좌에서 우, 위에서 아래 순서로 잎 -->
				<div class="obj03"></div>
				<div class="obj06"></div>
				<!--<div class="obj08"></div><!-- 햇빛 -->
			</div>

			<div class="mSection02">
				<div class="tit">
					<img src="images/index/mSection02_tit.png" alt="Shinangchon은 반세기를 지켜온 신뢰가 있습니다. 변함없이 신앙촌 제품을 사랑해주신 고객님들의 신뢰를 바탕으로 신앙촌은 정직과 신용의 대명사가 되었습니다." />
					<div class="arrow"><a href="#"><img src="images/index/arrow_up_3.png" alt="위로" /></a><a href="#"><img src="images/index/arrow_down.png" alt="아래로" /></a></div>
				</div>

				<p class="txt"><img src="images/index/mSection02_txt.png" alt="History" /></p>

				<div class="obj01"></div><!-- 위에서 아래 순서로 사진 -->
				<div class="obj02"></div>
				<div class="obj03"></div>
				<div class="obj05"></div>
				<div class="obj04"></div>
			</div>

			<div class="mSection03">
				<div class="obj01"></div><!-- 햇빛 -->
				<p class="txt lastChild"><img src="images/index/mSection03_txt.png" alt="Happy" /></p>

				<div class="tit">
					<img src="images/index/mSection03_tit.png" alt="Shinangchon은 건강과 행복을 생각합니다 모든 사람이 행복할 때까지 신앙촌은 고객 여러분 곁에서 함께할 것을 약속합니다. " />
					<div class="arrow"><a href="#"><img src="images/index/arrow_up_2.png" alt="위로" /></a><a href="#"><img class="mSection03_arrow" src="images/index/arrow_down_2.png" alt="아래로" /></a></div>
				</div>

			</div>
		</div>
	</div>
	<!--    //mContents    -->
</div>
</body></html>
